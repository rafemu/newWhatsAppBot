# הנחיות אבטחה

## סקירה כללית
מסמך זה מפרט את הנחיות האבטחה עבור האפליקציה, כולל שיטות העבודה המומלצות, אמצעי הגנה, ונהלי אבטחה.

## אימות משתמשים

### סיסמאות
- דרישות מינימום:
  - אורך מינימלי: 8 תווים
  - חייב להכיל: אותיות גדולות וקטנות, מספרים, תווים מיוחדים
  - אסור שיכיל: מידע אישי (שם, אימייל)
  - בדיקה מול רשימת סיסמאות נפוצות
- הצפנת סיסמאות:
  - שימוש ב-bcrypt עם salt אקראי
  - מינימום 12 סיבובי הצפנה
- מדיניות החלפת סיסמאות:
  - החלפה כל 90 יום
  - אין לחזור על 5 סיסמאות אחרונות
  - נעילת חשבון לאחר 5 ניסיונות כושלים

### אימות דו-שלבי (2FA)
- שימוש באלגוריתם TOTP (RFC 6238)
- קודי גיבוי חד-פעמיים
- אימות מחדש נדרש בפעולות רגישות
- תוקף קוד: 30 שניות

### ניהול טוקנים
- Access Token:
  - תוקף: 15 דקות
  - חתימה עם JWT (RS256)
  - מכיל: מזהה משתמש, הרשאות, זמן תפוגה
- Refresh Token:
  - תוקף: 7 ימים
  - מאוחסן בצורה מוצפנת
  - חד-פעמי (מתחלף בכל שימוש)
  - מבוטל בהתנתקות

## הרשאות ובקרת גישה

### RBAC (Role-Based Access Control)
- תפקידים מוגדרים:
  - ADMIN: גישה מלאה
  - MANAGER: ניהול משתמשים ותוכן
  - USER: פעולות בסיסיות
- הרשאות:
  - מוגדרות ברמת המשאב והפעולה
  - בדיקה בשרת ובלקוח
  - לוג של שינויי הרשאות

### אבטחת נתיבים
- הגנה על כל הנתיבים הרגישים
- בדיקת הרשאות ברמת הקומפוננטה
- הפניה לדף התחברות בגישה לא מורשית
- מניעת גישה ישירה לדפים מוגנים

## אבטחת תקשורת

### HTTPS
- חובה בכל הסביבות
- הפניה אוטומטית מ-HTTP
- תעודות SSL מאומתות
- HSTS מופעל

### הגנה מפני תקיפות
- CSRF:
  - שימוש ב-tokens
  - בדיקת origin
- XSS:
  - סניטציה של קלט
  - CSP מוגדר
- CORS:
  - הגדרות מחמירות
  - רשימת domains מאושרים

## ניטור ורישום

### Activity Logging
- רישום כל פעולות המשתמשים
- שמירת מידע על:
  - IP
  - User Agent
  - זמן
  - סוג פעולה
  - תוצאה
- התראות על פעילות חשודה

### ניטור אבטחה
- זיהוי ניסיונות פריצה
- התראות בזמן אמת
- ניתוח דפוסי שימוש
- מעקב אחר שגיאות

## אחסון נתונים

### מידע רגיש
- הצפנה בשכבת האחסון
- מפתחות הצפנה מנוהלים בנפרד
- גיבוי מאובטח
- מחיקה בטוחה

### LocalStorage
- אין לשמור מידע רגיש
- הצפנת מידע לא רגיש
- ניקוי בהתנתקות
- בדיקת תקינות

## פיתוח ותחזוקה

### שיטות עבודה מומלצות
- סקירות קוד
- בדיקות אבטחה תקופתיות
- עדכון ספריות
- תיעוד שינויים

### תגובה לאירועים
- נוהל טיפול באירועי אבטחה
- תהליך עדכון דחוף
- תקשורת עם משתמשים
- תחקור ולמידה

## בדיקות

### בדיקות אבטחה
- סריקות אוטומטיות
- בדיקות חדירה
- בדיקות עומס
- סימולציות תקיפה

### בדיקות אוטומטיות
- בדיקות יחידה
- בדיקות אינטגרציה
- בדיקות E2E
- בדיקות אבטחה 